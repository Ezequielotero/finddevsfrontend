{"ast":null,"code":"import _defineProperty from\"/Users/felipebuscaglia/Henry/FindDevs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/felipebuscaglia/Henry/FindDevs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/felipebuscaglia/Henry/FindDevs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Popup from'reactjs-popup';import style from'./PopUpStyle.module.css';import axios from'axios';import jwt from'jsonwebtoken';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPopUp(_ref){var isRegister=_ref.isRegister;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showPass=_useState6[0],setShowPass=_useState6[1];function handleInputChange(e){setInput(_objectSpread(_objectSpread({},input),{},_defineProperty({},e.target.name,e.target.value)));}function handleSubmit(){axios.post('/auth/login',input).then(function(res){var user=jwt.decode(res.data);localStorage.setItem('user',JSON.stringify(res.data));window.location.replace(\"/user/\".concat(user.username));}).catch(function(err){return setError(true);});}function closePopUp(close){setInput({});setError(false);close();}return/*#__PURE__*/_jsx(Popup,{trigger:isRegister?/*#__PURE__*/_jsx(\"span\",{className:\"mainColor\",children:\"Log in\"}):/*#__PURE__*/_jsx(\"span\",{className:style.headerIcon,children:\"login\"}),modal:true,children:function children(close){return/*#__PURE__*/_jsxs(\"div\",{id:style.mainDiv,children:[/*#__PURE__*/_jsxs(\"div\",{id:style.form,children:[/*#__PURE__*/_jsx(\"button\",{id:style.closeBtn,onClick:function onClick(){return closePopUp(close);},children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-times\"})}),/*#__PURE__*/_jsx(\"h1\",{id:style.title,children:\"Login\"}),/*#__PURE__*/_jsx(\"span\",{style:{width:'85%'},children:\"Sign into your account here.\"}),/*#__PURE__*/_jsxs(\"div\",{className:error?style.inputcontainerError:style.inputcontainer,children:[/*#__PURE__*/_jsx(\"i\",{class:\"far fa-user\"}),/*#__PURE__*/_jsx(\"input\",{name:\"username\",onChange:function onChange(e){return handleInputChange(e);},className:style.input,placeholder:\"Your username\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:error?style.inputcontainerError:style.inputcontainer,tabindex:\"-1\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-lock\"}),/*#__PURE__*/_jsx(\"input\",{style:{marginLeft:'10px'},name:\"password\",type:showPass?'text':'password',onChange:function onChange(e){return handleInputChange(e);},className:style.input,placeholder:\"Password\"}),/*#__PURE__*/_jsx(\"button\",{id:style.showPassBtn,onClick:function onClick(){return setShowPass(!showPass);},children:showPass?'Hide':'Show'})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,id:style.createBtn,children:\"Sign in.\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{id:style.alert,class:\"alert alert-danger\",role:\"alert\",children:\"Username or password not valid.\"})]});}});}export default LoginPopUp;","map":{"version":3,"sources":["/Users/felipebuscaglia/Henry/FindDevs/client/src/Components/PopUps/LoginPopUp.jsx"],"names":["React","useState","Popup","style","axios","jwt","LoginPopUp","isRegister","input","setInput","error","setError","showPass","setShowPass","handleInputChange","e","target","name","value","handleSubmit","post","then","res","user","decode","data","localStorage","setItem","JSON","stringify","window","location","replace","username","catch","err","closePopUp","close","headerIcon","mainDiv","form","closeBtn","title","width","inputcontainerError","inputcontainer","marginLeft","showPassBtn","createBtn","alert"],"mappings":"0eAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,yBAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,GAAP,KAAgB,cAAhB,C,wFAEA,QAASC,CAAAA,UAAT,MAAoC,IAAdC,CAAAA,UAAc,MAAdA,UAAc,eAENN,QAAQ,CAAC,EAAD,CAFF,wCAEzBO,KAFyB,eAElBC,QAFkB,8BAGNR,QAAQ,CAAC,KAAD,CAHF,yCAGzBS,KAHyB,eAGlBC,QAHkB,8BAIAV,QAAQ,CAAC,KAAD,CAJR,yCAIzBW,QAJyB,eAIfC,WAJe,eAOhC,QAASC,CAAAA,iBAAT,CAA2BC,CAA3B,CAA8B,CAC1BN,QAAQ,gCACDD,KADC,wBAEHO,CAAC,CAACC,MAAF,CAASC,IAFN,CAEaF,CAAC,CAACC,MAAF,CAASE,KAFtB,GAAR,CAIH,CAED,QAASC,CAAAA,YAAT,EAAwB,CACpBf,KAAK,CAACgB,IAAN,CAAW,aAAX,CAA0BZ,KAA1B,EACKa,IADL,CACU,SAAAC,GAAG,CAAI,CACT,GAAMC,CAAAA,IAAI,CAAGlB,GAAG,CAACmB,MAAJ,CAAWF,GAAG,CAACG,IAAf,CAAb,CACAC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BC,IAAI,CAACC,SAAL,CAAeP,GAAG,CAACG,IAAnB,CAA7B,EACAK,MAAM,CAACC,QAAP,CAAgBC,OAAhB,iBAAiCT,IAAI,CAACU,QAAtC,GACH,CALL,EAMKC,KANL,CAMW,SAAAC,GAAG,QAAIxB,CAAAA,QAAQ,CAAC,IAAD,CAAZ,EANd,EAOH,CAED,QAASyB,CAAAA,UAAT,CAAoBC,KAApB,CAA2B,CACvB5B,QAAQ,CAAC,EAAD,CAAR,CACAE,QAAQ,CAAC,KAAD,CAAR,CACA0B,KAAK,GACR,CAED,mBACI,KAAC,KAAD,EAAO,OAAO,CAAE9B,UAAU,cAAG,aAAM,SAAS,CAAC,WAAhB,oBAAH,cAA+C,aAAM,SAAS,CAAEJ,KAAK,CAACmC,UAAvB,mBAAzE,CAA0H,KAAK,KAA/H,UACK,kBAAAD,KAAK,qBACF,aAAK,EAAE,CAAElC,KAAK,CAACoC,OAAf,wBACI,aAAK,EAAE,CAAEpC,KAAK,CAACqC,IAAf,wBACI,eAAQ,EAAE,CAAErC,KAAK,CAACsC,QAAlB,CAA4B,OAAO,CAAE,yBAAML,CAAAA,UAAU,CAACC,KAAD,CAAhB,EAArC,uBAA8D,UAAG,KAAK,CAAC,cAAT,EAA9D,EADJ,cAEI,WAAI,EAAE,CAAElC,KAAK,CAACuC,KAAd,mBAFJ,cAGI,aAAM,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAT,CAAb,0CAHJ,cAII,aAAK,SAAS,CAAEjC,KAAK,CAAGP,KAAK,CAACyC,mBAAT,CAA+BzC,KAAK,CAAC0C,cAA1D,wBACI,UAAG,KAAK,CAAC,aAAT,EADJ,cAEI,cAAO,IAAI,CAAC,UAAZ,CAAuB,QAAQ,CAAE,kBAAC9B,CAAD,QAAOD,CAAAA,iBAAiB,CAACC,CAAD,CAAxB,EAAjC,CAA8D,SAAS,CAAEZ,KAAK,CAACK,KAA/E,CAAsF,WAAW,CAAC,eAAlG,EAFJ,GAJJ,cAQI,aAAK,SAAS,CAAEE,KAAK,CAAGP,KAAK,CAACyC,mBAAT,CAA+BzC,KAAK,CAAC0C,cAA1D,CAA0E,QAAQ,CAAC,IAAnF,wBACI,UAAG,KAAK,CAAC,aAAT,EADJ,cAEI,cAAO,KAAK,CAAE,CAAEC,UAAU,CAAE,MAAd,CAAd,CAAsC,IAAI,CAAC,UAA3C,CAAsD,IAAI,CAAElC,QAAQ,CAAG,MAAH,CAAY,UAAhF,CAA4F,QAAQ,CAAE,kBAACG,CAAD,QAAOD,CAAAA,iBAAiB,CAACC,CAAD,CAAxB,EAAtG,CAAmI,SAAS,CAAEZ,KAAK,CAACK,KAApJ,CAA2J,WAAW,CAAC,UAAvK,EAFJ,cAGI,eAAQ,EAAE,CAAEL,KAAK,CAAC4C,WAAlB,CAA+B,OAAO,CAAE,yBAAMlC,CAAAA,WAAW,CAAC,CAACD,QAAF,CAAjB,EAAxC,UAAuEA,QAAQ,CAAG,MAAH,CAAY,MAA3F,EAHJ,GARJ,cAaI,eAAQ,OAAO,CAAEO,YAAjB,CAA+B,EAAE,CAAEhB,KAAK,CAAC6C,SAAzC,sBAbJ,GADJ,CAgBKtC,KAAK,eACF,YAAK,EAAE,CAAEP,KAAK,CAAC8C,KAAf,CAAsB,KAAK,CAAC,oBAA5B,CAAiD,IAAI,CAAC,OAAtD,6CAjBR,GADE,EADV,EADJ,CA4BH,CAED,cAAe3C,CAAAA,UAAf","sourcesContent":["import React, { useState } from 'react';\nimport Popup from 'reactjs-popup';\nimport style from './PopUpStyle.module.css';\nimport axios from 'axios';\nimport jwt from 'jsonwebtoken';\n\nfunction LoginPopUp({ isRegister }) {\n\n    const [input, setInput] = useState({});\n    const [error, setError] = useState(false);\n    const [showPass, setShowPass] = useState(false);\n\n\n    function handleInputChange(e) {\n        setInput({\n            ...input,\n            [e.target.name]: e.target.value\n        })\n    }\n\n    function handleSubmit() {\n        axios.post('/auth/login', input)\n            .then(res => {\n                const user = jwt.decode(res.data);\n                localStorage.setItem('user', JSON.stringify(res.data));\n                window.location.replace(`/user/${user.username}`)\n            })\n            .catch(err => setError(true))\n    }\n\n    function closePopUp(close) {\n        setInput({});\n        setError(false);\n        close();\n    }\n\n    return (\n        <Popup trigger={isRegister ? <span className='mainColor'>Log in</span> : <span className={style.headerIcon}>login</span>} modal>\n            {close => (\n                <div id={style.mainDiv}>\n                    <div id={style.form}>\n                        <button id={style.closeBtn} onClick={() => closePopUp(close)}><i class=\"fas fa-times\"></i></button>\n                        <h1 id={style.title}>Login</h1>\n                        <span style={{ width: '85%' }}>Sign into your account here.</span>\n                        <div className={error ? style.inputcontainerError : style.inputcontainer}>\n                            <i class=\"far fa-user\"></i>\n                            <input name='username' onChange={(e) => handleInputChange(e)} className={style.input} placeholder='Your username'></input>\n                        </div>\n                        <div className={error ? style.inputcontainerError : style.inputcontainer} tabindex=\"-1\">\n                            <i class=\"fas fa-lock\"></i>\n                            <input style={{ marginLeft: '10px' }} name='password' type={showPass ? 'text' : 'password'} onChange={(e) => handleInputChange(e)} className={style.input} placeholder='Password'></input>\n                            <button id={style.showPassBtn} onClick={() => setShowPass(!showPass)}>{showPass ? 'Hide' : 'Show'}</button>\n                        </div>\n                        <button onClick={handleSubmit} id={style.createBtn}>Sign in.</button>\n                    </div>\n                    {error &&\n                        <div id={style.alert} class=\"alert alert-danger\" role=\"alert\">\n                            Username or password not valid.\n                        </div>\n                    }\n                </div>\n            )}\n        </Popup>\n    )\n}\n\nexport default LoginPopUp;"]},"metadata":{},"sourceType":"module"}